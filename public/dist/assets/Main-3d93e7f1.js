import{_ as e,r as n,o as t,c as o,a,w as l,b as s,F as r,p as i,d as c,e as d,f as u,g as p,h as f,u as h,s as m}from"./index-4206c4de.js";const v=(window.require&&window.require("electron")||window.electron||{}).ipcRenderer||void 0,g="controller.upload.saveFile",_="controller.upload.exportFile",w="controller.apktool.signer",y="controller.apktool.verify";const x=new function(e){return{all:e=e||new Map,on:function(n,t){var o=e.get(n);o?o.push(t):e.set(n,[t])},off:function(n,t){var o=e.get(n);o&&(t?o.splice(o.indexOf(t)>>>0,1):e.set(n,[]))},emit:function(n,t){var o=e.get(n);o&&o.slice().map((function(e){e(t)})),(o=e.get("*"))&&o.slice().map((function(e){e(n,t)}))}}},I={data:()=>({processType:"1"}),methods:{exportFile(){v.invoke(_)},async handleChange(e){const n=e.raw.path,t=e.name,o=JSON.stringify({filePath:n,fileName:t});await v.invoke(g,o).then((e=>{console.log("res:",e)})).catch((e=>{console.error(e)}));let a=t;"1"===this.processType&&await v.invoke(w,t).then((e=>{a=e,console.log("signer:",e)})),await v.invoke(y,a).then((e=>{const n=e.indexOf("WARNING:"),t=n<=-1?e:e.substring(0,n);x.emit("command-result",t),console.log("verifyResult",t)})),"1"===this.processType&&this.exportFile()},async signerApk(e){v.invoke(w,e).then((e=>{}))},async test(){v.invoke(y,"E:\\work_box\\APK\\Scene4_4.4.10.apk").then((e=>{const n=e.indexOf("WARNING:"),t=e.substring(0,n);x.emit("command-result",t),console.log(t)}))}}},b=e=>(i("data-v-0e9a71f6"),e=e(),c(),e),k=b((()=>d("div",{class:"el-upload__tip"}," 将APK拖拽到此处 ",-1))),T=b((()=>d("div",{class:"el-upload__text"},[s(" 点击这里 "),d("em",null,"点击这里上传")],-1)));const V=e(I,[["render",function(e,i,c,d,u,p){const f=n("el-radio"),h=n("el-icon"),m=n("el-upload");return t(),o(r,null,[a(f,{modelValue:u.processType,"onUpdate:modelValue":i[0]||(i[0]=e=>u.processType=e),label:"1"},{default:l((()=>[s("签名->验证->导出")])),_:1},8,["modelValue"]),a(f,{modelValue:u.processType,"onUpdate:modelValue":i[1]||(i[1]=e=>u.processType=e),label:"2"},{default:l((()=>[s("仅验证")])),_:1},8,["modelValue"]),a(m,{class:"upload-demo",drag:"",action:"","on-change":p.handleChange,"auto-upload":!1},{default:l((()=>[a(h,{class:"el-icon--upload"}),k,T])),_:1},8,["on-change"])],64)}],["__scopeId","data-v-0e9a71f6"]]),N={class:"terminal"},A=["innerHTML"];const F=e({data:()=>({lines:[],currentInput:"等待上传中..."}),methods:{handleInput(){""!==this.currentInput.trim()&&(this.lines.push(`> ${this.currentInput}`),this.currentInput="",this.$refs.bottom.scrollIntoView({behavior:"smooth"}))}},created(){x.on("command-result",(e=>{this.currentInput+="<br>"+e.replace(/\n/g,"<br>")}))},beforeUnmount(){x.off("command-result")}},[["render",function(e,n,a,l,s,r){return t(),o("div",N,[d("div",{class:"output",ref:"output",onKeydown:n[0]||(n[0]=u(((...e)=>r.handleInput&&r.handleInput(...e)),["enter"]))},[d("div",{innerHTML:s.currentInput,class:"output-text"},null,8,A)],544)])}],["__scopeId","data-v-53aa00d4"]]),M={class:"toolbar"},O={class:"upload-wrapper"},R={style:{flex:"18",overflow:"auto"}},K=e(p({__name:"Main",setup:e=>(e,o)=>{const s=n("el-icon"),r=n("el-dropdown"),i=n("el-header"),c=n("el-main"),u=n("el-container");return t(),f(u,{class:"layout-container-demo",style:{height:"100vh",display:"flex","flex-direction":"column"}},{default:l((()=>[a(i,{class:"el-header"},{default:l((()=>[d("div",M,[a(r,null,{default:l((()=>[a(s,{style:{"margin-right":"8px","margin-top":"1px"}},{default:l((()=>[a(h(m))])),_:1})])),_:1})])])),_:1}),a(c,{class:"main-container"},{default:l((()=>[d("div",O,[a(V)])])),_:1}),d("div",R,[a(F)])])),_:1})}}),[["__scopeId","data-v-61e32c1d"]]);export{K as default};
